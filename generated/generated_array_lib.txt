@name array_lib
@inputs 
@outputs 
@persist 

if (first()){
    #include "github/lib/compares"
}




#########################################sort<type>ByNumber#########################################
if (first()){
    
    function array array:sortNumbersByNumber(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:number = This){
            local Inserted = 0
            foreach(J, B:number = SortedArr){
                local AVal = (Desc ? Func(B)[number] : Func(A)[number])
                local BVal = (Desc ? Func(A)[number] : Func(B)[number])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertNumber(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushNumber(A)
            }
        }
        return SortedArr
    }
    function array array:sortNumbersByNumber(Func:string){
        return This:sortNumbersByNumber(Func, 0)
    }
    
    function array array:sortStringsByNumber(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:string = This){
            local Inserted = 0
            foreach(J, B:string = SortedArr){
                local AVal = (Desc ? Func(B)[number] : Func(A)[number])
                local BVal = (Desc ? Func(A)[number] : Func(B)[number])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertString(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushString(A)
            }
        }
        return SortedArr
    }
    function array array:sortStringsByNumber(Func:string){
        return This:sortStringsByNumber(Func, 0)
    }
    
    function array array:sortVectorsByNumber(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:vector = This){
            local Inserted = 0
            foreach(J, B:vector = SortedArr){
                local AVal = (Desc ? Func(B)[number] : Func(A)[number])
                local BVal = (Desc ? Func(A)[number] : Func(B)[number])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertVector(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushVector(A)
            }
        }
        return SortedArr
    }
    function array array:sortVectorsByNumber(Func:string){
        return This:sortVectorsByNumber(Func, 0)
    }
    
    function array array:sortEntitysByNumber(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:entity = This){
            local Inserted = 0
            foreach(J, B:entity = SortedArr){
                local AVal = (Desc ? Func(B)[number] : Func(A)[number])
                local BVal = (Desc ? Func(A)[number] : Func(B)[number])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertEntity(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushEntity(A)
            }
        }
        return SortedArr
    }
    function array array:sortEntitysByNumber(Func:string){
        return This:sortEntitysByNumber(Func, 0)
    }
    
    function array array:sortAnglesByNumber(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:angle = This){
            local Inserted = 0
            foreach(J, B:angle = SortedArr){
                local AVal = (Desc ? Func(B)[number] : Func(A)[number])
                local BVal = (Desc ? Func(A)[number] : Func(B)[number])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertAngle(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushAngle(A)
            }
        }
        return SortedArr
    }
    function array array:sortAnglesByNumber(Func:string){
        return This:sortAnglesByNumber(Func, 0)
    }
}


#########################################sort<type>ByString#########################################
if (first()){
    
    function array array:sortNumbersByString(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:number = This){
            local Inserted = 0
            foreach(J, B:number = SortedArr){
                local AVal = (Desc ? Func(B)[string] : Func(A)[string])
                local BVal = (Desc ? Func(A)[string] : Func(B)[string])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertNumber(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushNumber(A)
            }
        }
        return SortedArr
    }
    function array array:sortNumbersByString(Func:string){
        return This:sortNumbersByString(Func, 0)
    }
    
    function array array:sortStringsByString(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:string = This){
            local Inserted = 0
            foreach(J, B:string = SortedArr){
                local AVal = (Desc ? Func(B)[string] : Func(A)[string])
                local BVal = (Desc ? Func(A)[string] : Func(B)[string])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertString(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushString(A)
            }
        }
        return SortedArr
    }
    function array array:sortStringsByString(Func:string){
        return This:sortStringsByString(Func, 0)
    }
    
    function array array:sortVectorsByString(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:vector = This){
            local Inserted = 0
            foreach(J, B:vector = SortedArr){
                local AVal = (Desc ? Func(B)[string] : Func(A)[string])
                local BVal = (Desc ? Func(A)[string] : Func(B)[string])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertVector(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushVector(A)
            }
        }
        return SortedArr
    }
    function array array:sortVectorsByString(Func:string){
        return This:sortVectorsByString(Func, 0)
    }
    
    function array array:sortEntitysByString(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:entity = This){
            local Inserted = 0
            foreach(J, B:entity = SortedArr){
                local AVal = (Desc ? Func(B)[string] : Func(A)[string])
                local BVal = (Desc ? Func(A)[string] : Func(B)[string])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertEntity(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushEntity(A)
            }
        }
        return SortedArr
    }
    function array array:sortEntitysByString(Func:string){
        return This:sortEntitysByString(Func, 0)
    }
    
    function array array:sortAnglesByString(Func:string, Desc:number){
        local SortedArr = array()
        foreach(I, A:angle = This){
            local Inserted = 0
            foreach(J, B:angle = SortedArr){
                local AVal = (Desc ? Func(B)[string] : Func(A)[string])
                local BVal = (Desc ? Func(A)[string] : Func(B)[string])
                if (AVal:compare(BVal) < 0){
                    SortedArr:insertAngle(J, A)
                    Inserted = 1
                    break
                }
            }
            if (Inserted == 0){
                SortedArr:pushAngle(A)
            }
        }
        return SortedArr
    }
    function array array:sortAnglesByString(Func:string){
        return This:sortAnglesByString(Func, 0)
    }
}


###############################################Tests################################################
foreach(I, N:number = array(4, 5, 3, 1, 2):sortNumbersByNumber("int", 1)){
    print(N)
}
